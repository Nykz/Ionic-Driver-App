import{a as ne,c as oe,e as re,m as le,s as ae,u as me,w as se}from"./chunk-LG455DY4.js";import{a as te}from"./chunk-ZSWNRFCL.js";import{$a as R,Ab as Q,C as k,Eb as U,Fb as j,H as I,J as s,Kb as A,Pb as H,Qb as z,R as i,Rb as J,S as n,Sa as c,T as m,Ta as N,Ua as O,Ub as K,Va as M,X as _,Xa as u,Y as y,Z as g,Za as F,ab as D,bc as W,ca as T,da as V,ea as E,fb as B,ga as b,gb as G,gc as X,hc as Y,jb as q,lc as Z,m as x,mc as $,o as h,p as v,rc as ee,sc as ie,x as p,za as L}from"./chunk-HSJ3UP2Q.js";import"./chunk-5K2P5JXY.js";import"./chunk-G2NBWZGV.js";import"./chunk-5ZMMP3RU.js";import"./chunk-GBYUAKBO.js";import"./chunk-TFHXA6LG.js";import"./chunk-6L6JLL4O.js";import"./chunk-G3CV3VGG.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-4U6PRYVA.js";import"./chunk-4YKAI63M.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as w,b as C,f as P}from"./chunk-RW4GY4BD.js";var ce=["filePicker"];function de(t,a){if(t&1){let r=_();i(0,"div",23),y("click",function(){h(r);let e=g();return v(e.changeImage())}),m(1,"ion-icon",24),i(2,"p"),b(3,"Upload Profile Photo Here"),n()()}}function pe(t,a){if(t&1){let r=_();i(0,"div",25),y("click",function(){h(r);let e=g();return v(e.changeImage())}),m(1,"ion-img",26),n()}if(t&2){let r=g();p(),s("src",r.coverImage)}}function ge(t,a){if(t&1){let r=_();i(0,"ion-button",27),y("click",function(){h(r);let e=g();return v(e.onSubmit())}),b(1," Register "),n()}if(t&2){let r=g();s("disabled",!r.form.valid)}}function ue(t,a){if(t&1&&(i(0,"ion-button",28),m(1,"ion-spinner",29),n()),t&2){let r=g();s("disabled",!r.form.valid)}}var Te=(()=>{let a=class a{constructor(){this.isLoading=!1,this.cities=[],this.location={},this.isCuisine=!1,this.cuisines=[],this.categories=[],this.authService=x(te),this.global=x(ie),ne({bicycleOutline:oe,callOutline:re,keyOutline:ae,mailOutline:me,personOutline:se,cloudUploadOutline:le})}ngOnInit(){this.initForm()}initForm(){this.form=new M({name:new u("",{validators:[c.required]}),email:new u("",{validators:[c.required]}),phone:new u("",{validators:[c.required,c.minLength(10),c.maxLength(10)]}),password:new u("",{validators:[c.minLength(8)]}),vehicle:new u("",{validators:[c.required]})})}preview(o){console.log(o);let e=o.target.files;if(e.length==0||e[0].type.match(/image\/*/)==null)return;let d=e[0];this.cover_file=d;let f=new FileReader;f.onload=S=>{console.log("result: ",f.result),this.coverImage=f.result},f.readAsDataURL(d)}changeImage(){this.filePickerRef.nativeElement.click()}onSubmit(){return P(this,null,function*(){if(this.form.valid){if(!this.coverImage||this.coverImage==""){this.global.errorToast("Please provide a profile photo");return}try{this.isLoading=!0,console.log(this.form.value);let o=C(w({},this.form.value),{imageFile:this.cover_file});console.log("rider: ",o);let e=yield this.authService.register(o);console.log(e),this.global.successToast("Driver Registered Successfully"),this.isLoading=!1,this.form.reset(),this.global.navigateByUrl(ee.TABS)}catch(o){console.log(o),this.isLoading=!1,this.global.errorToast()}}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=k({type:a,selectors:[["app-signup"]],viewQuery:function(e,l){if(e&1&&T(ce,5),e&2){let d;V(d=E())&&(l.filePickerRef=d.first)}},decls:36,vars:5,consts:[["filePicker",""],["slot","start"],["defaultHref","/login"],[3,"formGroup"],["lines","none",1,"ion-margin-horizontal"],["class","itemImage ion-margin-top",3,"click",4,"ngIf"],["type","file","accept","image/jpeg;image/png",3,"change"],["class","itemImage imageDiv ion-margin-top",3,"click",4,"ngIf"],[1,"ion-margin-vertical"],["name","person-outline","slot","start","color","medium"],["type","text","formControlName","name","placeholder","Name","errorText","* Please enter your name"],[1,"ion-margin-bottom"],["name","mail-outline","slot","start","color","medium"],["type","email","formControlName","email","placeholder","Email","errorText","* Please enter a valid email address"],["name","key-outline","slot","start","color","medium"],["type","password","formControlName","password","placeholder","Password","minlength","8","errorText","* Please enter your password (min. 8 characters)"],["name","call-outline","slot","start","color","medium"],["type","tel","formControlName","phone","placeholder","Phone","minlength","10","maxlength","10","errorText","* Please enter proper Phone Number"],["name","bicycle-outline","slot","start","color","medium"],["type","text","formControlName","vehicle","placeholder","Vehicle no.","errorText","* Please enter your Vehicle number"],[1,"ion-text-center","ion-margin"],["expand","block","type","submit","color","primary",3,"disabled","click",4,"ngIf"],["color","primary",3,"disabled",4,"ngIf"],[1,"itemImage","ion-margin-top",3,"click"],["name","cloud-upload-outline","color","primary"],[1,"itemImage","imageDiv","ion-margin-top",3,"click"],[3,"src"],["expand","block","type","submit","color","primary",3,"click","disabled"],["color","primary",3,"disabled"],["name","circles"]],template:function(e,l){if(e&1){let d=_();i(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),b(3,"Register"),n(),i(4,"ion-buttons",1),m(5,"ion-back-button",2),n()()(),i(6,"ion-content")(7,"form",3)(8,"ion-list",4),I(9,de,4,0,"div",5),i(10,"input",6,0),y("change",function(S){return h(d),v(l.preview(S))}),n(),I(12,pe,2,1,"div",7),i(13,"div",8)(14,"ion-item"),m(15,"ion-icon",9)(16,"ion-input",10),n()(),i(17,"div",11)(18,"ion-item"),m(19,"ion-icon",12)(20,"ion-input",13),n()(),i(21,"div",11)(22,"ion-item"),m(23,"ion-icon",14)(24,"ion-input",15),n()(),i(25,"div",11)(26,"ion-item"),m(27,"ion-icon",16)(28,"ion-input",17),n()(),i(29,"div",11)(30,"ion-item"),m(31,"ion-icon",18)(32,"ion-input",19),n()()(),i(33,"div",20),I(34,ge,2,1,"ion-button",21)(35,ue,2,1,"ion-button",22),n()()()}e&2&&(p(7),s("formGroup",l.form),p(2),s("ngIf",!l.coverImage||l.coverImage==""),p(3),s("ngIf",l.coverImage&&l.coverImage!=""),p(22),s("ngIf",!l.isLoading),p(),s("ngIf",l.isLoading))},dependencies:[W,U,z,J,Z,K,$,Q,j,A,H,X,Y,L,q,F,N,O,B,G,R,D],styles:["img[_ngcontent-%COMP%]{height:10vh;width:10vh}ion-item[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:5px}.itemImage[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:5px;text-align:center;padding:5vh}.imageDiv[_ngcontent-%COMP%]{height:200px}ion-img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover}input[type=file][_ngcontent-%COMP%]{display:none}"]});let t=a;return t})();export{Te as SignupPage};
